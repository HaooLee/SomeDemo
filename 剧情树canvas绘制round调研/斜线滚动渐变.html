<!DOCTYPE html>
<html>
<body>
<canvas id="myCanvas" width="500" height="500" style="border:1px solid #d3d3d3;">
    Your browser does not support the HTML5 canvas tag.
</canvas>
<script>
  var canvas = document.getElementById("myCanvas");
  var ctx = canvas.getContext("2d");

  var translate = {x: 0, y: 0};
  var scale = 1;

  function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.save();
    ctx.translate(translate.x, translate.y);
    // Calculate the scaled coordinates manually
    var x = 50 * scale;
    var y = 50 * scale;
    var width = 100 * scale;
    var height = 100 * scale;
    ctx.fillRect(x, y, width, height);
    ctx.restore();
  }

  canvas.onwheel = function(event) {
    var rect = canvas.getBoundingClientRect();
    var mx = event.clientX - rect.left;
    var my = event.clientY - rect.top;
    if (event.ctrlKey) {
      var k = event.deltaY < 0 ? 1.1 : 0.9;
      var newScale = scale * k;
      var dx = (mx - translate.x);
      var dy = (my - translate.y);
      translate = {
        x: translate.x - dx * (k - 1),
        y: translate.y - dy * (k - 1)
      };
      scale = newScale;
    } else {
      translate = {
        x: translate.x - event.deltaX,
        y: translate.y - event.deltaY
      };
    }
    draw();
  };

  draw();
</script>
</body>
</html>